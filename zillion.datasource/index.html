<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Make sense of it all."><link href=https://totalhack.github.io/zillion/zillion.datasource/ rel=canonical><meta name=author content=totalhack><link rel="shortcut icon" href=../images/chart-donut.png><meta name=generator content="mkdocs-1.1.2, mkdocs-material-5.2.1"><title>zillion.datasource - Zillion</title><link rel=stylesheet href=../assets/stylesheets/main.71dfd922.min.css><link rel=stylesheet href=../assets/stylesheets/palette.616af814.min.css><meta name=theme-color content=#546e7a><link href=https://fonts.gstatic.com rel=preconnect crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback"><style>body,input{font-family:"Roboto",-apple-system,BlinkMacSystemFont,Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono",SFMono-Regular,Consolas,Menlo,monospace}</style><link rel=stylesheet href=../css/extra.css></head> <body dir=ltr data-md-color-scheme=default data-md-color-primary=blue-grey data-md-color-accent=light-blue> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#module-zilliondatasource class=md-skip> Skip to content </a> </div> <div data-md-component=announce> </div> <header class=md-header data-md-component=header> <nav class="md-header-nav md-grid" aria-label=Header> <a href=https://totalhack.github.io/zillion/ title=Zillion class="md-header-nav__button md-logo" aria-label=Zillion> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M13 2.05v3.03c3.39.49 6 3.39 6 6.92 0 .9-.18 1.75-.5 2.54l2.62 1.53c.56-1.24.88-2.62.88-4.07 0-5.18-3.95-9.45-9-9.95M12 19a7 7 0 01-7-7c0-3.53 2.61-6.43 6-6.92V2.05c-5.06.5-9 4.76-9 9.95a10 10 0 0010 10c3.3 0 6.23-1.61 8.05-4.09l-2.6-1.53A6.89 6.89 0 0112 19z"/></svg> </a> <label class="md-header-nav__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg> </label> <div class=md-header-nav__title data-md-component=header-title> <div class=md-header-nav__ellipsis> <span class="md-header-nav__topic md-ellipsis"> Zillion </span> <span class="md-header-nav__topic md-ellipsis"> zillion.datasource </span> </div> </div> <label class="md-header-nav__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query data-md-state=active> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </label> <button type=reset class="md-search__icon md-icon" aria-label=Clear data-md-component=search-reset tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg> </button> </form> <div class=md-search__output> <div class=md-search__scrollwrap data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list></ol> </div> </div> </div> </div> </div> <div class=md-header-nav__source> <a href=https://github.com/totalhack/zillion/ title="Go to repository" class=md-source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"/></svg> </div> <div class=md-source__repository> totalhack/zillion </div> </a> </div> </nav> </header> <div class=md-container data-md-component=container> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=https://totalhack.github.io/zillion/ title=Zillion class="md-nav__button md-logo" aria-label=Zillion> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M13 2.05v3.03c3.39.49 6 3.39 6 6.92 0 .9-.18 1.75-.5 2.54l2.62 1.53c.56-1.24.88-2.62.88-4.07 0-5.18-3.95-9.45-9-9.95M12 19a7 7 0 01-7-7c0-3.53 2.61-6.43 6-6.92V2.05c-5.06.5-9 4.76-9 9.95a10 10 0 0010 10c3.3 0 6.23-1.61 8.05-4.09l-2.6-1.53A6.89 6.89 0 0112 19z"/></svg> </a> Zillion </label> <div class=md-nav__source> <a href=https://github.com/totalhack/zillion/ title="Go to repository" class=md-source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"/></svg> </div> <div class=md-source__repository> totalhack/zillion </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=.. title="Getting Started" class=md-nav__link> Getting Started </a> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-2 type=checkbox id=nav-2 checked> <label class=md-nav__link for=nav-2> API Reference <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg> </span> </label> <nav class=md-nav aria-label="API Reference" data-md-level=1> <label class=md-nav__title for=nav-2> <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </span> API Reference </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../zillion.configs/ title=zillion.configs class=md-nav__link> zillion.configs </a> </li> <li class=md-nav__item> <a href=../zillion.core/ title=zillion.core class=md-nav__link> zillion.core </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" data-md-toggle=toc type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> zillion.datasource <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 9h14V7H3v2m0 4h14v-2H3v2m0 4h14v-2H3v2m16 0h2v-2h-2v2m0-10v2h2V7h-2m0 6h2v-2h-2v2z"/></svg> </span> </label> <a href=./ title=zillion.datasource class="md-nav__link md-nav__link--active"> zillion.datasource </a> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </span> Table of contents </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=#adhocdatatable class=md-nav__link> AdHocDataTable </a> </li> <li class=md-nav__item> <a href=#csvdatatable class=md-nav__link> CSVDataTable </a> </li> <li class=md-nav__item> <a href=#datasource class=md-nav__link> DataSource </a> </li> <li class=md-nav__item> <a href=#exceldatatable class=md-nav__link> ExcelDataTable </a> </li> <li class=md-nav__item> <a href=#googlesheetsdatatable class=md-nav__link> GoogleSheetsDataTable </a> </li> <li class=md-nav__item> <a href=#htmldatatable class=md-nav__link> HTMLDataTable </a> </li> <li class=md-nav__item> <a href=#jsondatatable class=md-nav__link> JSONDataTable </a> </li> <li class=md-nav__item> <a href=#join class=md-nav__link> Join </a> </li> <li class=md-nav__item> <a href=#joinpart class=md-nav__link> JoinPart </a> </li> <li class=md-nav__item> <a href=#neighbortable class=md-nav__link> NeighborTable </a> </li> <li class=md-nav__item> <a href=#sqlitedatatable class=md-nav__link> SQLiteDataTable </a> </li> <li class=md-nav__item> <a href=#tableset class=md-nav__link> TableSet </a> </li> <li class=md-nav__item> <a href=#connect_url_to_metadata class=md-nav__link> connect_url_to_metadata </a> </li> <li class=md-nav__item> <a href=#data_url_to_metadata class=md-nav__link> data_url_to_metadata </a> </li> <li class=md-nav__item> <a href=#datatable_from_config class=md-nav__link> datatable_from_config </a> </li> <li class=md-nav__item> <a href=#get_adhoc_datasource_filename class=md-nav__link> get_adhoc_datasource_filename </a> </li> <li class=md-nav__item> <a href=#get_adhoc_datasource_url class=md-nav__link> get_adhoc_datasource_url </a> </li> <li class=md-nav__item> <a href=#get_ds_config_context class=md-nav__link> get_ds_config_context </a> </li> <li class=md-nav__item> <a href=#join_from_path class=md-nav__link> join_from_path </a> </li> <li class=md-nav__item> <a href=#metadata_from_connect class=md-nav__link> metadata_from_connect </a> </li> <li class=md-nav__item> <a href=#parse_replace_after class=md-nav__link> parse_replace_after </a> </li> <li class=md-nav__item> <a href=#populate_url_context class=md-nav__link> populate_url_context </a> </li> <li class=md-nav__item> <a href=#reflect_metadata class=md-nav__link> reflect_metadata </a> </li> <li class=md-nav__item> <a href=#url_connect class=md-nav__link> url_connect </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../zillion.field/ title=zillion.field class=md-nav__link> zillion.field </a> </li> <li class=md-nav__item> <a href=../zillion.report/ title=zillion.report class=md-nav__link> zillion.report </a> </li> <li class=md-nav__item> <a href=../zillion.sql_utils/ title=zillion.sql_utils class=md-nav__link> zillion.sql_utils </a> </li> <li class=md-nav__item> <a href=../zillion.warehouse/ title=zillion.warehouse class=md-nav__link> zillion.warehouse </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../contributing/ title=Contributing class=md-nav__link> Contributing </a> </li> <li class=md-nav__item> <a href=https://github.com/totalhack/zillion title="Star on Github" class=md-nav__link> Star on Github </a> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </span> Table of contents </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=#adhocdatatable class=md-nav__link> AdHocDataTable </a> </li> <li class=md-nav__item> <a href=#csvdatatable class=md-nav__link> CSVDataTable </a> </li> <li class=md-nav__item> <a href=#datasource class=md-nav__link> DataSource </a> </li> <li class=md-nav__item> <a href=#exceldatatable class=md-nav__link> ExcelDataTable </a> </li> <li class=md-nav__item> <a href=#googlesheetsdatatable class=md-nav__link> GoogleSheetsDataTable </a> </li> <li class=md-nav__item> <a href=#htmldatatable class=md-nav__link> HTMLDataTable </a> </li> <li class=md-nav__item> <a href=#jsondatatable class=md-nav__link> JSONDataTable </a> </li> <li class=md-nav__item> <a href=#join class=md-nav__link> Join </a> </li> <li class=md-nav__item> <a href=#joinpart class=md-nav__link> JoinPart </a> </li> <li class=md-nav__item> <a href=#neighbortable class=md-nav__link> NeighborTable </a> </li> <li class=md-nav__item> <a href=#sqlitedatatable class=md-nav__link> SQLiteDataTable </a> </li> <li class=md-nav__item> <a href=#tableset class=md-nav__link> TableSet </a> </li> <li class=md-nav__item> <a href=#connect_url_to_metadata class=md-nav__link> connect_url_to_metadata </a> </li> <li class=md-nav__item> <a href=#data_url_to_metadata class=md-nav__link> data_url_to_metadata </a> </li> <li class=md-nav__item> <a href=#datatable_from_config class=md-nav__link> datatable_from_config </a> </li> <li class=md-nav__item> <a href=#get_adhoc_datasource_filename class=md-nav__link> get_adhoc_datasource_filename </a> </li> <li class=md-nav__item> <a href=#get_adhoc_datasource_url class=md-nav__link> get_adhoc_datasource_url </a> </li> <li class=md-nav__item> <a href=#get_ds_config_context class=md-nav__link> get_ds_config_context </a> </li> <li class=md-nav__item> <a href=#join_from_path class=md-nav__link> join_from_path </a> </li> <li class=md-nav__item> <a href=#metadata_from_connect class=md-nav__link> metadata_from_connect </a> </li> <li class=md-nav__item> <a href=#parse_replace_after class=md-nav__link> parse_replace_after </a> </li> <li class=md-nav__item> <a href=#populate_url_context class=md-nav__link> populate_url_context </a> </li> <li class=md-nav__item> <a href=#reflect_metadata class=md-nav__link> reflect_metadata </a> </li> <li class=md-nav__item> <a href=#url_connect class=md-nav__link> url_connect </a> </li> </ul> </nav> </div> </div> </div> <div class=md-content> <article class="md-content__inner md-typeset"> <a href=https://github.com/totalhack/zillion/edit/master/docs/zillion.datasource.md title="Edit this page" class="md-content__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg> </a> <h1 id=module-zilliondatasource>Module zillion.datasource<a class=headerlink href=#module-zilliondatasource title="Permanent link">&para;</a></h1> <h2 id=adhocdatatable><a href=https://github.com/totalhack/zillion/blob/master/zillion/datasource.py#L1356-L1508>AdHocDataTable</a><a class=headerlink href=#adhocdatatable title="Permanent link">&para;</a></h2> <p><em>Bases</em>: tlbx.logging_utils.PrintMixin</p> <div class=autodoc> <div class=autodoc-signature><em>class </em><code>zillion.datasource.<strong>AdHocDataTable</strong></code><span class=autodoc-punctuation>(</span><em class=autodoc-param>name</em><span class=autodoc-punctuation>, </span><em class=autodoc-param>data</em><span class=autodoc-punctuation>, </span><em class=autodoc-param>table_type</em><span class=autodoc-punctuation>, </span><em class=autodoc-param>columns=None</em><span class=autodoc-punctuation>, </span><em class=autodoc-param>primary_key=None</em><span class=autodoc-punctuation>, </span><em class=autodoc-param>parent=None</em><span class=autodoc-punctuation>, </span><em class=autodoc-param>if_exists='fail'</em><span class=autodoc-punctuation>, </span><em class=autodoc-param>fillna_value=''</em><span class=autodoc-punctuation>, </span><em class=autodoc-param>schema=None</em><span class=autodoc-punctuation>, </span><em class=autodoc-param>**kwargs</em><span class=autodoc-punctuation>)</span></div> <div class=autodoc-docstring><p>Create an adhoc (temporary) representation of a table for use in an adhoc datasource</p> <p><strong>Parameters:</strong></p> <ul> <li><strong>name</strong> - (<em>str</em>) The name of the table</li> <li><strong>data</strong> - (<em>iterable or DataFrame</em>) The data to create the adhoc table from</li> <li><strong>table_type</strong> - (<em>str</em>) Specify the TableType</li> <li><strong>columns</strong> - (<em>dict, optional</em>) Column configuration for the table</li> <li><strong>primary_key</strong> - (<em>list of str, optional</em>) A list of fields that make up the primary key of the table</li> <li><strong>parent</strong> - (<em>str, optional</em>) A reference to a parent table in the same datasource</li> <li><strong>if_exists</strong> - (<em>str, optional</em>) Control behavior when datatables already exist in the database</li> <li><strong>fillna_value</strong> - (<em>str or int, optional</em>) Fill null values in primary key columns with this value before writing to a SQL database.</li> <li><strong>schema</strong> - (<em>str, optional</em>) The schema in which the table resides</li> <li><strong>kwargs</strong> - Keyword arguments passed to pandas.DataFrame.from_records if a DataFrame is created from iterable data</li> </ul></div> <div class=autodoc-members> <div class=autodoc-signature><code><strong>get_dataframe</strong></code><span class=autodoc-punctuation>(</span><em class=autodoc-param>self</em><span class=autodoc-punctuation>)</span></div> <div class=autodoc-docstring><p>Get the DataFrame representation of the data</p></div> <div class=autodoc-signature><code><strong>table_exists</strong></code><span class=autodoc-punctuation>(</span><em class=autodoc-param>self</em><span class=autodoc-punctuation>, </span><em class=autodoc-param>engine</em><span class=autodoc-punctuation>)</span></div> <div class=autodoc-docstring><p>Determine if this table exists</p></div> <div class=autodoc-signature><code><strong>to_sql</strong></code><span class=autodoc-punctuation>(</span><em class=autodoc-param>self</em><span class=autodoc-punctuation>, </span><em class=autodoc-param>engine</em><span class=autodoc-punctuation>, </span><em class=autodoc-param>if_exists='fail'</em><span class=autodoc-punctuation>, </span><em class=autodoc-param>method='multi'</em><span class=autodoc-punctuation>, </span><em class=autodoc-param>chunksize=1000</em><span class=autodoc-punctuation>)</span></div> <div class=autodoc-docstring><p>Use pandas to push the adhoc table data to a SQL database.</p> <p><strong>Parameters:</strong></p> <ul> <li><strong>engine</strong> - (<em>SQLAlchemy connection engine</em>) The engine used to connect to the database</li> <li><strong>if_exists</strong> - (<em>str, optional</em>) Passed through to pandas. An additional option of "ignore" is supported which first checks if the table exists and if so takes no action. The "append" option is not currently supported.</li> <li><strong>method</strong> - (<em>str, optional</em>) Passed through to pandas</li> <li><strong>chunksize</strong> - (<em>type, optional</em>) Passed through to pandas</li> </ul></div> </div> </div> <h2 id=csvdatatable><a href=https://github.com/totalhack/zillion/blob/master/zillion/datasource.py#L1527-L1537>CSVDataTable</a><a class=headerlink href=#csvdatatable title="Permanent link">&para;</a></h2> <p><em>Bases</em>: zillion.datasource.AdHocDataTable</p> <div class=autodoc> <div class=autodoc-signature><em>class </em><code>zillion.datasource.<strong>CSVDataTable</strong></code><span class=autodoc-punctuation>(</span><em class=autodoc-param>name</em><span class=autodoc-punctuation>, </span><em class=autodoc-param>data</em><span class=autodoc-punctuation>, </span><em class=autodoc-param>table_type</em><span class=autodoc-punctuation>, </span><em class=autodoc-param>columns=None</em><span class=autodoc-punctuation>, </span><em class=autodoc-param>primary_key=None</em><span class=autodoc-punctuation>, </span><em class=autodoc-param>parent=None</em><span class=autodoc-punctuation>, </span><em class=autodoc-param>if_exists='fail'</em><span class=autodoc-punctuation>, </span><em class=autodoc-param>fillna_value=''</em><span class=autodoc-punctuation>, </span><em class=autodoc-param>schema=None</em><span class=autodoc-punctuation>, </span><em class=autodoc-param>**kwargs</em><span class=autodoc-punctuation>)</span></div> <div class=autodoc-docstring><p>AdHocDataTable from a JSON file using pandas.read_csv</p></div> <div class=autodoc-members> <div class=autodoc-signature><code><strong>get_dataframe</strong></code><span class=autodoc-punctuation>(</span><em class=autodoc-param>self</em><span class=autodoc-punctuation>)</span></div> <div class=autodoc-docstring></div> <div class=autodoc-signature><code><strong>table_exists</strong></code><span class=autodoc-punctuation>(</span><em class=autodoc-param>self</em><span class=autodoc-punctuation>, </span><em class=autodoc-param>engine</em><span class=autodoc-punctuation>)</span></div> <div class=autodoc-docstring><p>Determine if this table exists</p></div> <div class=autodoc-signature><code><strong>to_sql</strong></code><span class=autodoc-punctuation>(</span><em class=autodoc-param>self</em><span class=autodoc-punctuation>, </span><em class=autodoc-param>engine</em><span class=autodoc-punctuation>, </span><em class=autodoc-param>if_exists='fail'</em><span class=autodoc-punctuation>, </span><em class=autodoc-param>method='multi'</em><span class=autodoc-punctuation>, </span><em class=autodoc-param>chunksize=1000</em><span class=autodoc-punctuation>)</span></div> <div class=autodoc-docstring><p>Use pandas to push the adhoc table data to a SQL database.</p> <p><strong>Parameters:</strong></p> <ul> <li><strong>engine</strong> - (<em>SQLAlchemy connection engine</em>) The engine used to connect to the database</li> <li><strong>if_exists</strong> - (<em>str, optional</em>) Passed through to pandas. An additional option of "ignore" is supported which first checks if the table exists and if so takes no action. The "append" option is not currently supported.</li> <li><strong>method</strong> - (<em>str, optional</em>) Passed through to pandas</li> <li><strong>chunksize</strong> - (<em>type, optional</em>) Passed through to pandas</li> </ul></div> </div> </div> <h2 id=datasource><a href=https://github.com/totalhack/zillion/blob/master/zillion/datasource.py#L436-L1353>DataSource</a><a class=headerlink href=#datasource title="Permanent link">&para;</a></h2> <p><em>Bases</em>: zillion.field.FieldManagerMixin, tlbx.logging_utils.PrintMixin</p> <div class=autodoc> <div class=autodoc-signature><em>class </em><code>zillion.datasource.<strong>DataSource</strong></code><span class=autodoc-punctuation>(</span><em class=autodoc-param>name</em><span class=autodoc-punctuation>, </span><em class=autodoc-param>metadata=None</em><span class=autodoc-punctuation>, </span><em class=autodoc-param>config=None</em><span class=autodoc-punctuation>)</span></div> <div class=autodoc-docstring><p>A component of a warehouse that houses one or more related tables</p> <p><strong>Parameters:</strong></p> <ul> <li><strong>name</strong> - (<em>str</em>) The name of the datasource</li> <li><strong>metadata</strong> - (<em>SQLAlchemy metadata, optional</em>) A SQLAlchemy metadata object that may have zillion configuration information defined in the table and column <code>info.zillion</code> attribute</li> <li><strong>config</strong> - (<em>dict, str, or buffer, optional</em>) A dict adhering to the DataSourceConfigSchema or a file location to load the config from</li> </ul></div> <div class=autodoc-members> <div class=autodoc-signature><code><strong>add_dimension</strong></code><span class=autodoc-punctuation>(</span><em class=autodoc-param>self</em><span class=autodoc-punctuation>, </span><em class=autodoc-param>dimension</em><span class=autodoc-punctuation>, </span><em class=autodoc-param>force=False</em><span class=autodoc-punctuation>)</span></div> <div class=autodoc-docstring><p>Add a reference to a dimension to this FieldManager</p></div> <div class=autodoc-signature><code><strong>add_metric</strong></code><span class=autodoc-punctuation>(</span><em class=autodoc-param>self</em><span class=autodoc-punctuation>, </span><em class=autodoc-param>metric</em><span class=autodoc-punctuation>, </span><em class=autodoc-param>force=False</em><span class=autodoc-punctuation>)</span></div> <div class=autodoc-docstring><p>Add a reference to a metric to this FieldManager</p></div> <div class=autodoc-signature><code><strong>apply_config</strong></code><span class=autodoc-punctuation>(</span><em class=autodoc-param>self</em><span class=autodoc-punctuation>, </span><em class=autodoc-param>config</em><span class=autodoc-punctuation>, </span><em class=autodoc-param>reflect=False</em><span class=autodoc-punctuation>)</span></div> <div class=autodoc-docstring><p>Apply a datasource config to this datasource's metadata. This will also ensure zillion info is present on the metadata, populate global fields, and rebuild the datasource graph.</p> <p><strong>Parameters:</strong></p> <ul> <li><strong>config</strong> - (<em>dict</em>) The datasource config to apply</li> <li><strong>reflect</strong> - (<em>bool, optional</em>) If true, use SQLAlchemy to reflect the database. Table-level reflection will also occur if any tables are created from data URLs.</li> </ul></div> <div class=autodoc-signature><code><strong>directly_has_dimension</strong></code><span class=autodoc-punctuation>(</span><em class=autodoc-param>self</em><span class=autodoc-punctuation>, </span><em class=autodoc-param>name</em><span class=autodoc-punctuation>)</span></div> <div class=autodoc-docstring><p>Check if this FieldManager directly stores this dimension</p></div> <div class=autodoc-signature><code><strong>directly_has_field</strong></code><span class=autodoc-punctuation>(</span><em class=autodoc-param>self</em><span class=autodoc-punctuation>, </span><em class=autodoc-param>name</em><span class=autodoc-punctuation>)</span></div> <div class=autodoc-docstring><p>Check if this FieldManager directly stores this field</p></div> <div class=autodoc-signature><code><strong>directly_has_metric</strong></code><span class=autodoc-punctuation>(</span><em class=autodoc-param>self</em><span class=autodoc-punctuation>, </span><em class=autodoc-param>name</em><span class=autodoc-punctuation>)</span></div> <div class=autodoc-docstring><p>Check if this FieldManager directly stores this metric</p></div> <div class=autodoc-signature><code><strong>find_descendent_tables</strong></code><span class=autodoc-punctuation>(</span><em class=autodoc-param>self</em><span class=autodoc-punctuation>, </span><em class=autodoc-param>table</em><span class=autodoc-punctuation>)</span></div> <div class=autodoc-docstring><p>Find graph descendents of the table</p></div> <div class=autodoc-signature><code><strong>find_neighbor_tables</strong></code><span class=autodoc-punctuation>(</span><em class=autodoc-param>self</em><span class=autodoc-punctuation>, </span><em class=autodoc-param>table</em><span class=autodoc-punctuation>)</span></div> <div class=autodoc-docstring><p>Find tables that can be joined to or are parents of the given table</p> <p><strong>Parameters:</strong></p> <ul> <li><strong>table</strong> - (<em>SQLAlchemy Table</em>) The table to find neighbors for</li> </ul> <p><strong>Returns:</strong></p> <p>(<em>list</em>) - A list of NeighborTables</p></div> <div class=autodoc-signature><code><strong>find_possible_table_sets</strong></code><span class=autodoc-punctuation>(</span><em class=autodoc-param>self</em><span class=autodoc-punctuation>, </span><em class=autodoc-param>ds_tables_with_field</em><span class=autodoc-punctuation>, </span><em class=autodoc-param>field</em><span class=autodoc-punctuation>, </span><em class=autodoc-param>grain</em><span class=autodoc-punctuation>, </span><em class=autodoc-param>dimension_grain</em><span class=autodoc-punctuation>)</span></div> <div class=autodoc-docstring><p>Find table sets that meet the grain</p> <p><strong>Parameters:</strong></p> <ul> <li><strong>ds_tables_with_field</strong> - (<em>list of tables</em>) A list of datasource tables that have the target field</li> <li><strong>field</strong> - (<em>str</em>) The target field we are trying to cover</li> <li><strong>grain</strong> - (<em>iterable</em>) The grain the table set must support</li> <li><strong>dimension_grain</strong> - The subset of the grain that are requested dimensions</li> </ul> <p><strong>Returns:</strong></p> <p>(<em>list</em>) - A list of TableSets</p></div> <div class=autodoc-signature><code><strong>from_data_url</strong></code><span class=autodoc-punctuation>(</span><em class=autodoc-param>name</em><span class=autodoc-punctuation>, </span><em class=autodoc-param>data_url</em><span class=autodoc-punctuation>, </span><em class=autodoc-param>config=None</em><span class=autodoc-punctuation>, </span><em class=autodoc-param>if_exists='fail'</em><span class=autodoc-punctuation>, </span><em class=autodoc-param>replace_after='1 days'</em><span class=autodoc-punctuation>)</span></div> <div class=autodoc-docstring><p>Create a DataSource from a data url</p> <p><strong>Parameters:</strong></p> <ul> <li><strong>name</strong> - (<em>str</em>) The name to give the datasource</li> <li><strong>data_url</strong> - (<em>str</em>) A url pointing to a SQLite database to download</li> <li><strong>config</strong> - (<em>dict, optional</em>) A DataSourceConfigSchema dict config. Note that the connect param of this config will be overwritten if present.</li> <li><strong>if_exists</strong> - (<em>str, optional</em>) Control behavior when the database already exists</li> <li><strong>replace_after</strong> - (<em>str, optional</em>) Replace the data file after this interval if <code>if_exists</code> is "replace_after". See <code>url_connect</code> docs for more information.</li> </ul> <p><strong>Returns:</strong></p> <p>(<em>DataSource</em>) - A DataSource created from the data_url and config</p></div> <div class=autodoc-signature><code><strong>from_datatables</strong></code><span class=autodoc-punctuation>(</span><em class=autodoc-param>name</em><span class=autodoc-punctuation>, </span><em class=autodoc-param>datatables</em><span class=autodoc-punctuation>, </span><em class=autodoc-param>config=None</em><span class=autodoc-punctuation>)</span></div> <div class=autodoc-docstring><p>Create a DataSource from a list of datatables</p> <p><strong>Parameters:</strong></p> <ul> <li><strong>name</strong> - (<em>str</em>) The name to give the datasource</li> <li><strong>datatables</strong> - (<em>list of AdHocDataTables</em>) A list of AdHocDataTables to use to create the DataSource</li> <li><strong>config</strong> - (<em>dict, optional</em>) A DataSourceConfigSchema dict config</li> </ul> <p><strong>Returns:</strong></p> <p>(<em>DataSource</em>) - A DataSource created from the datatables and config</p></div> <div class=autodoc-signature><code><strong>get_child_field_managers</strong></code><span class=autodoc-punctuation>(</span><em class=autodoc-param>self</em><span class=autodoc-punctuation>)</span></div> <div class=autodoc-docstring><p>Get a list of child FieldManagers</p></div> <div class=autodoc-signature><code><strong>get_columns_with_field</strong></code><span class=autodoc-punctuation>(</span><em class=autodoc-param>self</em><span class=autodoc-punctuation>, </span><em class=autodoc-param>field_name</em><span class=autodoc-punctuation>)</span></div> <div class=autodoc-docstring><p>Get a list of column objects that support a field</p></div> <div class=autodoc-signature><code><strong>get_dialect_name</strong></code><span class=autodoc-punctuation>(</span><em class=autodoc-param>self</em><span class=autodoc-punctuation>)</span></div> <div class=autodoc-docstring><p>Get the name of the SQLAlchemy metadata dialect</p></div> <div class=autodoc-signature><code><strong>get_dim_tables_with_dim</strong></code><span class=autodoc-punctuation>(</span><em class=autodoc-param>self</em><span class=autodoc-punctuation>, </span><em class=autodoc-param>dim_name</em><span class=autodoc-punctuation>)</span></div> <div class=autodoc-docstring><p>Get a list of dimension table objects with the given dimension</p></div> <div class=autodoc-signature><code><strong>get_dimension</strong></code><span class=autodoc-punctuation>(</span><em class=autodoc-param>self</em><span class=autodoc-punctuation>, </span><em class=autodoc-param>obj</em><span class=autodoc-punctuation>, </span><em class=autodoc-param>adhoc_fms=None</em><span class=autodoc-punctuation>)</span></div> <div class=autodoc-docstring><p>Get a reference to a dimension on this FieldManager</p></div> <div class=autodoc-signature><code><strong>get_dimension_configs</strong></code><span class=autodoc-punctuation>(</span><em class=autodoc-param>self</em><span class=autodoc-punctuation>, </span><em class=autodoc-param>adhoc_fms=None</em><span class=autodoc-punctuation>)</span></div> <div class=autodoc-docstring><p>Get a dict of all dimension configs supported by this FieldManager</p></div> <div class=autodoc-signature><code><strong>get_dimension_names</strong></code><span class=autodoc-punctuation>(</span><em class=autodoc-param>self</em><span class=autodoc-punctuation>, </span><em class=autodoc-param>adhoc_fms=None</em><span class=autodoc-punctuation>)</span></div> <div class=autodoc-docstring><p>Get a set of dimension names supported by this FieldManager</p></div> <div class=autodoc-signature><code><strong>get_dimensions</strong></code><span class=autodoc-punctuation>(</span><em class=autodoc-param>self</em><span class=autodoc-punctuation>, </span><em class=autodoc-param>adhoc_fms=None</em><span class=autodoc-punctuation>)</span></div> <div class=autodoc-docstring><p>Get a dict of all dimensions supported by this FieldManager</p></div> <div class=autodoc-signature><code><strong>get_direct_dimension_configs</strong></code><span class=autodoc-punctuation>(</span><em class=autodoc-param>self</em><span class=autodoc-punctuation>)</span></div> <div class=autodoc-docstring><p>Get a dict of dimension configs directly supported by this FieldManager</p></div> <div class=autodoc-signature><code><strong>get_direct_dimensions</strong></code><span class=autodoc-punctuation>(</span><em class=autodoc-param>self</em><span class=autodoc-punctuation>)</span></div> <div class=autodoc-docstring><p>Get dimensions directly stored on this FieldManager</p></div> <div class=autodoc-signature><code><strong>get_direct_metric_configs</strong></code><span class=autodoc-punctuation>(</span><em class=autodoc-param>self</em><span class=autodoc-punctuation>)</span></div> <div class=autodoc-docstring><p>Get a dict of metric configs directly supported by this FieldManager</p></div> <div class=autodoc-signature><code><strong>get_direct_metrics</strong></code><span class=autodoc-punctuation>(</span><em class=autodoc-param>self</em><span class=autodoc-punctuation>)</span></div> <div class=autodoc-docstring><p>Get metrics directly stored on this FieldManager</p></div> <div class=autodoc-signature><code><strong>get_field</strong></code><span class=autodoc-punctuation>(</span><em class=autodoc-param>self</em><span class=autodoc-punctuation>, </span><em class=autodoc-param>obj</em><span class=autodoc-punctuation>, </span><em class=autodoc-param>adhoc_fms=None</em><span class=autodoc-punctuation>)</span></div> <div class=autodoc-docstring><p>Get a refence to a field on this FieldManager</p></div> <div class=autodoc-signature><code><strong>get_field_instances</strong></code><span class=autodoc-punctuation>(</span><em class=autodoc-param>self</em><span class=autodoc-punctuation>, </span><em class=autodoc-param>field</em><span class=autodoc-punctuation>, </span><em class=autodoc-param>adhoc_fms=None</em><span class=autodoc-punctuation>)</span></div> <div class=autodoc-docstring><p>Get a dict of FieldManagers (including child and adhoc FMs) that support a field</p></div> <div class=autodoc-signature><code><strong>get_field_managers</strong></code><span class=autodoc-punctuation>(</span><em class=autodoc-param>self</em><span class=autodoc-punctuation>, </span><em class=autodoc-param>adhoc_fms=None</em><span class=autodoc-punctuation>)</span></div> <div class=autodoc-docstring><p>Get a list of all child FieldManagers including adhoc</p></div> <div class=autodoc-signature><code><strong>get_field_names</strong></code><span class=autodoc-punctuation>(</span><em class=autodoc-param>self</em><span class=autodoc-punctuation>, </span><em class=autodoc-param>adhoc_fms=None</em><span class=autodoc-punctuation>)</span></div> <div class=autodoc-docstring><p>Get a set of field names supported by this FieldManager</p></div> <div class=autodoc-signature><code><strong>get_fields</strong></code><span class=autodoc-punctuation>(</span><em class=autodoc-param>self</em><span class=autodoc-punctuation>, </span><em class=autodoc-param>adhoc_fms=None</em><span class=autodoc-punctuation>)</span></div> <div class=autodoc-docstring><p>Get a dict of all fields supported by this FieldManager</p></div> <div class=autodoc-signature><code><strong>get_metric</strong></code><span class=autodoc-punctuation>(</span><em class=autodoc-param>self</em><span class=autodoc-punctuation>, </span><em class=autodoc-param>obj</em><span class=autodoc-punctuation>, </span><em class=autodoc-param>adhoc_fms=None</em><span class=autodoc-punctuation>)</span></div> <div class=autodoc-docstring><p>Get a reference to a metric on this FieldManager. If the object passed is a dict it is expected to defined an AdHocMetric.</p></div> <div class=autodoc-signature><code><strong>get_metric_configs</strong></code><span class=autodoc-punctuation>(</span><em class=autodoc-param>self</em><span class=autodoc-punctuation>, </span><em class=autodoc-param>adhoc_fms=None</em><span class=autodoc-punctuation>)</span></div> <div class=autodoc-docstring><p>Get a dict of all metric configs supported by this FieldManager</p></div> <div class=autodoc-signature><code><strong>get_metric_names</strong></code><span class=autodoc-punctuation>(</span><em class=autodoc-param>self</em><span class=autodoc-punctuation>, </span><em class=autodoc-param>adhoc_fms=None</em><span class=autodoc-punctuation>)</span></div> <div class=autodoc-docstring><p>Get a set of metric names supported by this FieldManager</p></div> <div class=autodoc-signature><code><strong>get_metric_tables_with_metric</strong></code><span class=autodoc-punctuation>(</span><em class=autodoc-param>self</em><span class=autodoc-punctuation>, </span><em class=autodoc-param>metric_name</em><span class=autodoc-punctuation>)</span></div> <div class=autodoc-docstring><p>Get a list of metric table objects with the given metric</p></div> <div class=autodoc-signature><code><strong>get_metrics</strong></code><span class=autodoc-punctuation>(</span><em class=autodoc-param>self</em><span class=autodoc-punctuation>, </span><em class=autodoc-param>adhoc_fms=None</em><span class=autodoc-punctuation>)</span></div> <div class=autodoc-docstring><p>Get a dict of all metrics supported by this FieldManager</p></div> <div class=autodoc-signature><code><strong>get_params</strong></code><span class=autodoc-punctuation>(</span><em class=autodoc-param>self</em><span class=autodoc-punctuation>)</span></div> <div class=autodoc-docstring><p>Get a simple dict representation of the datasource params. This is currently not sufficient to completely rebuild the datasource.</p></div> <div class=autodoc-signature><code><strong>get_possible_joins</strong></code><span class=autodoc-punctuation>(</span><em class=autodoc-param>self</em><span class=autodoc-punctuation>, </span><em class=autodoc-param>table</em><span class=autodoc-punctuation>, </span><em class=autodoc-param>grain</em><span class=autodoc-punctuation>)</span></div> <div class=autodoc-docstring><p>This takes a given table (usually a metric table) and tries to find one or more joins to each dimension of the grain. It's possible some of these joins satisfy other parts of the grain too which leaves room for consolidation, but it's also possible to have it generate independent, non-overlapping joins to meet the grain.</p> <p><strong>Parameters:</strong></p> <ul> <li><strong>table</strong> - (<em>SQLAlchemy Table</em>) Table to analyze for joins to grain</li> <li><strong>grain</strong> - (<em>iterable</em>) An iterable of dimension names that the given table must join to</li> </ul> <p><strong>Returns:</strong></p> <p>(<em>dict</em>) - A mapping of dimension -&gt; dimension joins</p></div> <div class=autodoc-signature><code><strong>get_table</strong></code><span class=autodoc-punctuation>(</span><em class=autodoc-param>self</em><span class=autodoc-punctuation>, </span><em class=autodoc-param>fullname</em><span class=autodoc-punctuation>)</span></div> <div class=autodoc-docstring><p>Get the table object from the datasource's metadata</p> <p><strong>Parameters:</strong></p> <ul> <li><strong>fullname</strong> - (<em>str</em>) The full name of the table</li> </ul> <p><strong>Returns:</strong></p> <p>(<em>Table</em>) - The SQLAlchemy table object from the metadata</p></div> <div class=autodoc-signature><code><strong>get_tables_with_field</strong></code><span class=autodoc-punctuation>(</span><em class=autodoc-param>self</em><span class=autodoc-punctuation>, </span><em class=autodoc-param>field_name</em><span class=autodoc-punctuation>, </span><em class=autodoc-param>table_type=None</em><span class=autodoc-punctuation>)</span></div> <div class=autodoc-docstring><p>Get a list of Tables that have a field</p> <p><strong>Parameters:</strong></p> <ul> <li><strong>field_name</strong> - (<em>str</em>) The name of the field to check for</li> <li><strong>table_type</strong> - (<em>str, optional</em>) Check only this TableType</li> </ul> <p><strong>Returns:</strong></p> <p>(<em>list</em>) - A list of Table objects</p></div> <div class=autodoc-signature><code><strong>has_dimension</strong></code><span class=autodoc-punctuation>(</span><em class=autodoc-param>self</em><span class=autodoc-punctuation>, </span><em class=autodoc-param>name</em><span class=autodoc-punctuation>, </span><em class=autodoc-param>adhoc_fms=None</em><span class=autodoc-punctuation>)</span></div> <div class=autodoc-docstring><p>Check whether a dimension is contained in this FieldManager</p></div> <div class=autodoc-signature><code><strong>has_field</strong></code><span class=autodoc-punctuation>(</span><em class=autodoc-param>self</em><span class=autodoc-punctuation>, </span><em class=autodoc-param>name</em><span class=autodoc-punctuation>, </span><em class=autodoc-param>adhoc_fms=None</em><span class=autodoc-punctuation>)</span></div> <div class=autodoc-docstring><p>Check whether a field is contained in this FieldManager</p></div> <div class=autodoc-signature><code><strong>has_metric</strong></code><span class=autodoc-punctuation>(</span><em class=autodoc-param>self</em><span class=autodoc-punctuation>, </span><em class=autodoc-param>name</em><span class=autodoc-punctuation>, </span><em class=autodoc-param>adhoc_fms=None</em><span class=autodoc-punctuation>)</span></div> <div class=autodoc-docstring><p>Check whether a metric is contained in this FieldManager</p></div> <div class=autodoc-signature><code><strong>has_table</strong></code><span class=autodoc-punctuation>(</span><em class=autodoc-param>self</em><span class=autodoc-punctuation>, </span><em class=autodoc-param>table</em><span class=autodoc-punctuation>)</span></div> <div class=autodoc-docstring><p>Check whether the table is in this datasource's metadata</p> <p><strong>Parameters:</strong></p> <ul> <li><strong>table</strong> - (<em>SQLAlchemy Table</em>) A SQLAlchemy table</li> </ul> <p><strong>Returns:</strong></p> <p>(<em>bool</em>) - True if the table's fullname is in the metadata.tables map</p></div> <div class=autodoc-signature><code><strong>print_dimensions</strong></code><span class=autodoc-punctuation>(</span><em class=autodoc-param>self</em><span class=autodoc-punctuation>, </span><em class=autodoc-param>indent=None</em><span class=autodoc-punctuation>)</span></div> <div class=autodoc-docstring><p>Print all dimensions in this FieldManager</p></div> <div class=autodoc-signature><code><strong>print_info</strong></code><span class=autodoc-punctuation>(</span><em class=autodoc-param>self</em><span class=autodoc-punctuation>)</span></div> <div class=autodoc-docstring><p>Print the structure of the datasource</p></div> <div class=autodoc-signature><code><strong>print_metrics</strong></code><span class=autodoc-punctuation>(</span><em class=autodoc-param>self</em><span class=autodoc-punctuation>, </span><em class=autodoc-param>indent=None</em><span class=autodoc-punctuation>)</span></div> <div class=autodoc-docstring><p>Print all metrics in this FieldManager</p></div> </div> </div> <h2 id=exceldatatable><a href=https://github.com/totalhack/zillion/blob/master/zillion/datasource.py#L1540-L1552>ExcelDataTable</a><a class=headerlink href=#exceldatatable title="Permanent link">&para;</a></h2> <p><em>Bases</em>: zillion.datasource.AdHocDataTable</p> <div class=autodoc> <div class=autodoc-signature><em>class </em><code>zillion.datasource.<strong>ExcelDataTable</strong></code><span class=autodoc-punctuation>(</span><em class=autodoc-param>name</em><span class=autodoc-punctuation>, </span><em class=autodoc-param>data</em><span class=autodoc-punctuation>, </span><em class=autodoc-param>table_type</em><span class=autodoc-punctuation>, </span><em class=autodoc-param>columns=None</em><span class=autodoc-punctuation>, </span><em class=autodoc-param>primary_key=None</em><span class=autodoc-punctuation>, </span><em class=autodoc-param>parent=None</em><span class=autodoc-punctuation>, </span><em class=autodoc-param>if_exists='fail'</em><span class=autodoc-punctuation>, </span><em class=autodoc-param>fillna_value=''</em><span class=autodoc-punctuation>, </span><em class=autodoc-param>schema=None</em><span class=autodoc-punctuation>, </span><em class=autodoc-param>**kwargs</em><span class=autodoc-punctuation>)</span></div> <div class=autodoc-docstring><p>AdHocDataTable from a JSON file using pandas.read_excel</p></div> <div class=autodoc-members> <div class=autodoc-signature><code><strong>get_dataframe</strong></code><span class=autodoc-punctuation>(</span><em class=autodoc-param>self</em><span class=autodoc-punctuation>)</span></div> <div class=autodoc-docstring></div> <div class=autodoc-signature><code><strong>table_exists</strong></code><span class=autodoc-punctuation>(</span><em class=autodoc-param>self</em><span class=autodoc-punctuation>, </span><em class=autodoc-param>engine</em><span class=autodoc-punctuation>)</span></div> <div class=autodoc-docstring><p>Determine if this table exists</p></div> <div class=autodoc-signature><code><strong>to_sql</strong></code><span class=autodoc-punctuation>(</span><em class=autodoc-param>self</em><span class=autodoc-punctuation>, </span><em class=autodoc-param>engine</em><span class=autodoc-punctuation>, </span><em class=autodoc-param>if_exists='fail'</em><span class=autodoc-punctuation>, </span><em class=autodoc-param>method='multi'</em><span class=autodoc-punctuation>, </span><em class=autodoc-param>chunksize=1000</em><span class=autodoc-punctuation>)</span></div> <div class=autodoc-docstring><p>Use pandas to push the adhoc table data to a SQL database.</p> <p><strong>Parameters:</strong></p> <ul> <li><strong>engine</strong> - (<em>SQLAlchemy connection engine</em>) The engine used to connect to the database</li> <li><strong>if_exists</strong> - (<em>str, optional</em>) Passed through to pandas. An additional option of "ignore" is supported which first checks if the table exists and if so takes no action. The "append" option is not currently supported.</li> <li><strong>method</strong> - (<em>str, optional</em>) Passed through to pandas</li> <li><strong>chunksize</strong> - (<em>type, optional</em>) Passed through to pandas</li> </ul></div> </div> </div> <h2 id=googlesheetsdatatable><a href=https://github.com/totalhack/zillion/blob/master/zillion/datasource.py#L1582-L1604>GoogleSheetsDataTable</a><a class=headerlink href=#googlesheetsdatatable title="Permanent link">&para;</a></h2> <p><em>Bases</em>: zillion.datasource.AdHocDataTable</p> <div class=autodoc> <div class=autodoc-signature><em>class </em><code>zillion.datasource.<strong>GoogleSheetsDataTable</strong></code><span class=autodoc-punctuation>(</span><em class=autodoc-param>name</em><span class=autodoc-punctuation>, </span><em class=autodoc-param>data</em><span class=autodoc-punctuation>, </span><em class=autodoc-param>table_type</em><span class=autodoc-punctuation>, </span><em class=autodoc-param>columns=None</em><span class=autodoc-punctuation>, </span><em class=autodoc-param>primary_key=None</em><span class=autodoc-punctuation>, </span><em class=autodoc-param>parent=None</em><span class=autodoc-punctuation>, </span><em class=autodoc-param>if_exists='fail'</em><span class=autodoc-punctuation>, </span><em class=autodoc-param>fillna_value=''</em><span class=autodoc-punctuation>, </span><em class=autodoc-param>schema=None</em><span class=autodoc-punctuation>, </span><em class=autodoc-param>**kwargs</em><span class=autodoc-punctuation>)</span></div> <div class=autodoc-docstring><p>AdHocDataTable from a google sheet. Parsed as a CSVDataTable.</p></div> <div class=autodoc-members> <div class=autodoc-signature><code><strong>get_dataframe</strong></code><span class=autodoc-punctuation>(</span><em class=autodoc-param>self</em><span class=autodoc-punctuation>)</span></div> <div class=autodoc-docstring></div> <div class=autodoc-signature><code><strong>table_exists</strong></code><span class=autodoc-punctuation>(</span><em class=autodoc-param>self</em><span class=autodoc-punctuation>, </span><em class=autodoc-param>engine</em><span class=autodoc-punctuation>)</span></div> <div class=autodoc-docstring><p>Determine if this table exists</p></div> <div class=autodoc-signature><code><strong>to_sql</strong></code><span class=autodoc-punctuation>(</span><em class=autodoc-param>self</em><span class=autodoc-punctuation>, </span><em class=autodoc-param>engine</em><span class=autodoc-punctuation>, </span><em class=autodoc-param>if_exists='fail'</em><span class=autodoc-punctuation>, </span><em class=autodoc-param>method='multi'</em><span class=autodoc-punctuation>, </span><em class=autodoc-param>chunksize=1000</em><span class=autodoc-punctuation>)</span></div> <div class=autodoc-docstring><p>Use pandas to push the adhoc table data to a SQL database.</p> <p><strong>Parameters:</strong></p> <ul> <li><strong>engine</strong> - (<em>SQLAlchemy connection engine</em>) The engine used to connect to the database</li> <li><strong>if_exists</strong> - (<em>str, optional</em>) Passed through to pandas. An additional option of "ignore" is supported which first checks if the table exists and if so takes no action. The "append" option is not currently supported.</li> <li><strong>method</strong> - (<em>str, optional</em>) Passed through to pandas</li> <li><strong>chunksize</strong> - (<em>type, optional</em>) Passed through to pandas</li> </ul></div> </div> </div> <h2 id=htmldatatable><a href=https://github.com/totalhack/zillion/blob/master/zillion/datasource.py#L1566-L1579>HTMLDataTable</a><a class=headerlink href=#htmldatatable title="Permanent link">&para;</a></h2> <p><em>Bases</em>: zillion.datasource.AdHocDataTable</p> <div class=autodoc> <div class=autodoc-signature><em>class </em><code>zillion.datasource.<strong>HTMLDataTable</strong></code><span class=autodoc-punctuation>(</span><em class=autodoc-param>name</em><span class=autodoc-punctuation>, </span><em class=autodoc-param>data</em><span class=autodoc-punctuation>, </span><em class=autodoc-param>table_type</em><span class=autodoc-punctuation>, </span><em class=autodoc-param>columns=None</em><span class=autodoc-punctuation>, </span><em class=autodoc-param>primary_key=None</em><span class=autodoc-punctuation>, </span><em class=autodoc-param>parent=None</em><span class=autodoc-punctuation>, </span><em class=autodoc-param>if_exists='fail'</em><span class=autodoc-punctuation>, </span><em class=autodoc-param>fillna_value=''</em><span class=autodoc-punctuation>, </span><em class=autodoc-param>schema=None</em><span class=autodoc-punctuation>, </span><em class=autodoc-param>**kwargs</em><span class=autodoc-punctuation>)</span></div> <div class=autodoc-docstring><p>AdHocDataTable from an html table using pandas.read_html. By default it expects a table in the same format as produced by: <code>df.reset_index().to_html("table.html", index=False)</code></p></div> <div class=autodoc-members> <div class=autodoc-signature><code><strong>get_dataframe</strong></code><span class=autodoc-punctuation>(</span><em class=autodoc-param>self</em><span class=autodoc-punctuation>)</span></div> <div class=autodoc-docstring></div> <div class=autodoc-signature><code><strong>table_exists</strong></code><span class=autodoc-punctuation>(</span><em class=autodoc-param>self</em><span class=autodoc-punctuation>, </span><em class=autodoc-param>engine</em><span class=autodoc-punctuation>)</span></div> <div class=autodoc-docstring><p>Determine if this table exists</p></div> <div class=autodoc-signature><code><strong>to_sql</strong></code><span class=autodoc-punctuation>(</span><em class=autodoc-param>self</em><span class=autodoc-punctuation>, </span><em class=autodoc-param>engine</em><span class=autodoc-punctuation>, </span><em class=autodoc-param>if_exists='fail'</em><span class=autodoc-punctuation>, </span><em class=autodoc-param>method='multi'</em><span class=autodoc-punctuation>, </span><em class=autodoc-param>chunksize=1000</em><span class=autodoc-punctuation>)</span></div> <div class=autodoc-docstring><p>Use pandas to push the adhoc table data to a SQL database.</p> <p><strong>Parameters:</strong></p> <ul> <li><strong>engine</strong> - (<em>SQLAlchemy connection engine</em>) The engine used to connect to the database</li> <li><strong>if_exists</strong> - (<em>str, optional</em>) Passed through to pandas. An additional option of "ignore" is supported which first checks if the table exists and if so takes no action. The "append" option is not currently supported.</li> <li><strong>method</strong> - (<em>str, optional</em>) Passed through to pandas</li> <li><strong>chunksize</strong> - (<em>type, optional</em>) Passed through to pandas</li> </ul></div> </div> </div> <h2 id=jsondatatable><a href=https://github.com/totalhack/zillion/blob/master/zillion/datasource.py#L1555-L1563>JSONDataTable</a><a class=headerlink href=#jsondatatable title="Permanent link">&para;</a></h2> <p><em>Bases</em>: zillion.datasource.AdHocDataTable</p> <div class=autodoc> <div class=autodoc-signature><em>class </em><code>zillion.datasource.<strong>JSONDataTable</strong></code><span class=autodoc-punctuation>(</span><em class=autodoc-param>name</em><span class=autodoc-punctuation>, </span><em class=autodoc-param>data</em><span class=autodoc-punctuation>, </span><em class=autodoc-param>table_type</em><span class=autodoc-punctuation>, </span><em class=autodoc-param>columns=None</em><span class=autodoc-punctuation>, </span><em class=autodoc-param>primary_key=None</em><span class=autodoc-punctuation>, </span><em class=autodoc-param>parent=None</em><span class=autodoc-punctuation>, </span><em class=autodoc-param>if_exists='fail'</em><span class=autodoc-punctuation>, </span><em class=autodoc-param>fillna_value=''</em><span class=autodoc-punctuation>, </span><em class=autodoc-param>schema=None</em><span class=autodoc-punctuation>, </span><em class=autodoc-param>**kwargs</em><span class=autodoc-punctuation>)</span></div> <div class=autodoc-docstring><p>AdHocDataTable from a JSON file using pandas.read_json</p></div> <div class=autodoc-members> <div class=autodoc-signature><code><strong>get_dataframe</strong></code><span class=autodoc-punctuation>(</span><em class=autodoc-param>self</em><span class=autodoc-punctuation>, </span><em class=autodoc-param>orient='table'</em><span class=autodoc-punctuation>)</span></div> <div class=autodoc-docstring></div> <div class=autodoc-signature><code><strong>table_exists</strong></code><span class=autodoc-punctuation>(</span><em class=autodoc-param>self</em><span class=autodoc-punctuation>, </span><em class=autodoc-param>engine</em><span class=autodoc-punctuation>)</span></div> <div class=autodoc-docstring><p>Determine if this table exists</p></div> <div class=autodoc-signature><code><strong>to_sql</strong></code><span class=autodoc-punctuation>(</span><em class=autodoc-param>self</em><span class=autodoc-punctuation>, </span><em class=autodoc-param>engine</em><span class=autodoc-punctuation>, </span><em class=autodoc-param>if_exists='fail'</em><span class=autodoc-punctuation>, </span><em class=autodoc-param>method='multi'</em><span class=autodoc-punctuation>, </span><em class=autodoc-param>chunksize=1000</em><span class=autodoc-punctuation>)</span></div> <div class=autodoc-docstring><p>Use pandas to push the adhoc table data to a SQL database.</p> <p><strong>Parameters:</strong></p> <ul> <li><strong>engine</strong> - (<em>SQLAlchemy connection engine</em>) The engine used to connect to the database</li> <li><strong>if_exists</strong> - (<em>str, optional</em>) Passed through to pandas. An additional option of "ignore" is supported which first checks if the table exists and if so takes no action. The "append" option is not currently supported.</li> <li><strong>method</strong> - (<em>str, optional</em>) Passed through to pandas</li> <li><strong>chunksize</strong> - (<em>type, optional</em>) Passed through to pandas</li> </ul></div> </div> </div> <h2 id=join><a href=https://github.com/totalhack/zillion/blob/master/zillion/datasource.py#L308-L393>Join</a><a class=headerlink href=#join title="Permanent link">&para;</a></h2> <p><em>Bases</em>: tlbx.logging_utils.PrintMixin</p> <div class=autodoc> <div class=autodoc-signature><em>class </em><code>zillion.datasource.<strong>Join</strong></code><span class=autodoc-punctuation>(</span><em class=autodoc-param>join_parts</em><span class=autodoc-punctuation>, </span><em class=autodoc-param>field_map</em><span class=autodoc-punctuation>)</span></div> <div class=autodoc-docstring><p>Represents a join (potentially multi-part) that will be part of a query</p> <p><strong>Parameters:</strong></p> <ul> <li><strong>join_parts</strong> - (<em>list of JoinParts</em>) A list of JoinParts that will make up a single Join</li> <li><strong>field_map</strong> - (<em>dict</em>) The requested fields this join is meant to satisfy</li> </ul></div> <div class=autodoc-members> <div class=autodoc-signature><code><strong>add_field</strong></code><span class=autodoc-punctuation>(</span><em class=autodoc-param>self</em><span class=autodoc-punctuation>, </span><em class=autodoc-param>field</em><span class=autodoc-punctuation>)</span></div> <div class=autodoc-docstring><p>Denote that this field is covered in this join</p></div> <div class=autodoc-signature><code><strong>add_fields</strong></code><span class=autodoc-punctuation>(</span><em class=autodoc-param>self</em><span class=autodoc-punctuation>, </span><em class=autodoc-param>fields</em><span class=autodoc-punctuation>)</span></div> <div class=autodoc-docstring><p>Add multiple fields as covered in this join</p></div> <div class=autodoc-signature><code><strong>get_covered_fields</strong></code><span class=autodoc-punctuation>(</span><em class=autodoc-param>self</em><span class=autodoc-punctuation>)</span></div> <div class=autodoc-docstring><p>Generate a list of all possible fields this can cover</p></div> <div class=autodoc-signature><code><strong>join_fields_for_table</strong></code><span class=autodoc-punctuation>(</span><em class=autodoc-param>self</em><span class=autodoc-punctuation>, </span><em class=autodoc-param>table_name</em><span class=autodoc-punctuation>)</span></div> <div class=autodoc-docstring><p>Get a list of join fields for a particular table in the join</p></div> <div class=autodoc-signature><code><strong>join_parts_for_table</strong></code><span class=autodoc-punctuation>(</span><em class=autodoc-param>self</em><span class=autodoc-punctuation>, </span><em class=autodoc-param>table_name</em><span class=autodoc-punctuation>)</span></div> <div class=autodoc-docstring><p>Get a list of JoinParts that reference a particular table</p></div> </div> </div> <h2 id=joinpart><a href=https://github.com/totalhack/zillion/blob/master/zillion/datasource.py#L298-L305>JoinPart</a><a class=headerlink href=#joinpart title="Permanent link">&para;</a></h2> <p><em>Bases</em>: tlbx.logging_utils.PrintMixin</p> <div class=autodoc> <div class=autodoc-signature><em>class </em><code>zillion.datasource.<strong>JoinPart</strong></code><span class=autodoc-punctuation>(</span><em class=autodoc-param>datasource</em><span class=autodoc-punctuation>, </span><em class=autodoc-param>table_names</em><span class=autodoc-punctuation>, </span><em class=autodoc-param>join_fields</em><span class=autodoc-punctuation>)</span></div> <div class=autodoc-docstring><p>A part of a join that defines a join between two particular tables</p></div> </div> <h2 id=neighbortable><a href=https://github.com/totalhack/zillion/blob/master/zillion/datasource.py#L426-L433>NeighborTable</a><a class=headerlink href=#neighbortable title="Permanent link">&para;</a></h2> <p><em>Bases</em>: tlbx.logging_utils.PrintMixin</p> <div class=autodoc> <div class=autodoc-signature><em>class </em><code>zillion.datasource.<strong>NeighborTable</strong></code><span class=autodoc-punctuation>(</span><em class=autodoc-param>table</em><span class=autodoc-punctuation>, </span><em class=autodoc-param>join_fields</em><span class=autodoc-punctuation>)</span></div> <div class=autodoc-docstring><p>Represents a neighboring node in the datasource graph</p></div> </div> <h2 id=sqlitedatatable><a href=https://github.com/totalhack/zillion/blob/master/zillion/datasource.py#L1511-L1524>SQLiteDataTable</a><a class=headerlink href=#sqlitedatatable title="Permanent link">&para;</a></h2> <p><em>Bases</em>: zillion.datasource.AdHocDataTable</p> <div class=autodoc> <div class=autodoc-signature><em>class </em><code>zillion.datasource.<strong>SQLiteDataTable</strong></code><span class=autodoc-punctuation>(</span><em class=autodoc-param>name</em><span class=autodoc-punctuation>, </span><em class=autodoc-param>data</em><span class=autodoc-punctuation>, </span><em class=autodoc-param>table_type</em><span class=autodoc-punctuation>, </span><em class=autodoc-param>columns=None</em><span class=autodoc-punctuation>, </span><em class=autodoc-param>primary_key=None</em><span class=autodoc-punctuation>, </span><em class=autodoc-param>parent=None</em><span class=autodoc-punctuation>, </span><em class=autodoc-param>if_exists='fail'</em><span class=autodoc-punctuation>, </span><em class=autodoc-param>fillna_value=''</em><span class=autodoc-punctuation>, </span><em class=autodoc-param>schema=None</em><span class=autodoc-punctuation>, </span><em class=autodoc-param>**kwargs</em><span class=autodoc-punctuation>)</span></div> <div class=autodoc-docstring><p>AdHocDataTable from an existing sqlite database on the local filesystem</p> <p>Note: the "data" param to AdHocDataTable is ignored. This is simply a workaround to get an AdHocDataTable reference for an existing SQLite DB without having to recreate anything from data.</p></div> <div class=autodoc-members> <div class=autodoc-signature><code><strong>get_dataframe</strong></code><span class=autodoc-punctuation>(</span><em class=autodoc-param>self</em><span class=autodoc-punctuation>)</span></div> <div class=autodoc-docstring></div> <div class=autodoc-signature><code><strong>table_exists</strong></code><span class=autodoc-punctuation>(</span><em class=autodoc-param>self</em><span class=autodoc-punctuation>, </span><em class=autodoc-param>engine</em><span class=autodoc-punctuation>)</span></div> <div class=autodoc-docstring><p>Determine if this table exists</p></div> <div class=autodoc-signature><code><strong>to_sql</strong></code><span class=autodoc-punctuation>(</span><em class=autodoc-param>self</em><span class=autodoc-punctuation>, </span><em class=autodoc-param>engine</em><span class=autodoc-punctuation>, </span><em class=autodoc-param>**kwargs</em><span class=autodoc-punctuation>)</span></div> <div class=autodoc-docstring></div> </div> </div> <h2 id=tableset><a href=https://github.com/totalhack/zillion/blob/master/zillion/datasource.py#L247-L295>TableSet</a><a class=headerlink href=#tableset title="Permanent link">&para;</a></h2> <p><em>Bases</em>: tlbx.logging_utils.PrintMixin</p> <div class=autodoc> <div class=autodoc-signature><em>class </em><code>zillion.datasource.<strong>TableSet</strong></code><span class=autodoc-punctuation>(</span><em class=autodoc-param>datasource</em><span class=autodoc-punctuation>, </span><em class=autodoc-param>ds_table</em><span class=autodoc-punctuation>, </span><em class=autodoc-param>join</em><span class=autodoc-punctuation>, </span><em class=autodoc-param>grain</em><span class=autodoc-punctuation>, </span><em class=autodoc-param>target_fields</em><span class=autodoc-punctuation>)</span></div> <div class=autodoc-docstring><p>A set of tables in a datasource that can meet a grain and provide target fields.</p> <p><strong>Parameters:</strong></p> <ul> <li><strong>datasource</strong> - (<em>DataSource</em>) The DataSource containing all tables</li> <li><strong>ds_table</strong> - (<em>Table</em>) A table containing a desired metric or dimension</li> <li><strong>join</strong> - (<em>Join</em>) A join to related tables that satisfies the grain and provides the target fields</li> <li><strong>grain</strong> - (<em>list of str</em>) A list of dimensions that must be supported by the join</li> <li><strong>target_fields</strong> - (<em>list of str</em>) A list of fields being targeted</li> </ul></div> <div class=autodoc-members> <div class=autodoc-signature><code><strong>get_covered_fields</strong></code><span class=autodoc-punctuation>(</span><em class=autodoc-param>self</em><span class=autodoc-punctuation>)</span></div> <div class=autodoc-docstring><p>Get a list of all covered fields in this table set</p></div> <div class=autodoc-signature><code><strong>get_covered_metrics</strong></code><span class=autodoc-punctuation>(</span><em class=autodoc-param>self</em><span class=autodoc-punctuation>, </span><em class=autodoc-param>wh</em><span class=autodoc-punctuation>)</span></div> <div class=autodoc-docstring><p>Get a list of metrics covered by this table set</p> <p><strong>Parameters:</strong></p> <ul> <li><strong>wh</strong> - (<em>Warehouse</em>) The warehouse to use as a reference for metric fields</li> </ul> <p><strong>Returns:</strong></p> <p>(<em>list of str</em>) - A list of metric names covered in this TableSet</p></div> </div> </div> <h2 id=connect_url_to_metadata><a href=https://github.com/totalhack/zillion/blob/master/zillion/datasource.py#L64-L73>connect_url_to_metadata</a><a class=headerlink href=#connect_url_to_metadata title="Permanent link">&para;</a></h2> <div class=autodoc> <div class=autodoc-signature><code>zillion.datasource.<strong>connect_url_to_metadata</strong></code><span class=autodoc-punctuation>(</span><em class=autodoc-param>url</em><span class=autodoc-punctuation>, </span><em class=autodoc-param>ds_name=None</em><span class=autodoc-punctuation>)</span></div> <div class=autodoc-docstring><p>Create a bound SQLAlchemy MetaData object from a database URL. The ds_name param is used to determine datasource config context for variable substitution.</p></div> </div> <h2 id=data_url_to_metadata><a href=https://github.com/totalhack/zillion/blob/master/zillion/datasource.py#L104-L133>data_url_to_metadata</a><a class=headerlink href=#data_url_to_metadata title="Permanent link">&para;</a></h2> <div class=autodoc> <div class=autodoc-signature><code>zillion.datasource.<strong>data_url_to_metadata</strong></code><span class=autodoc-punctuation>(</span><em class=autodoc-param>data_url</em><span class=autodoc-punctuation>, </span><em class=autodoc-param>ds_name</em><span class=autodoc-punctuation>, </span><em class=autodoc-param>if_exists='fail'</em><span class=autodoc-punctuation>, </span><em class=autodoc-param>replace_after='1 days'</em><span class=autodoc-punctuation>)</span></div> <div class=autodoc-docstring><p>Create a bound SQLAlchemy MetaData object from a data URL. The ds_name param is used to determine datasource config context for variable substitution.</p></div> </div> <h2 id=datatable_from_config><a href=https://github.com/totalhack/zillion/blob/master/zillion/datasource.py#L1607-L1649>datatable_from_config</a><a class=headerlink href=#datatable_from_config title="Permanent link">&para;</a></h2> <div class=autodoc> <div class=autodoc-signature><code>zillion.datasource.<strong>datatable_from_config</strong></code><span class=autodoc-punctuation>(</span><em class=autodoc-param>name</em><span class=autodoc-punctuation>, </span><em class=autodoc-param>config</em><span class=autodoc-punctuation>, </span><em class=autodoc-param>schema=None</em><span class=autodoc-punctuation>, </span><em class=autodoc-param>**kwargs</em><span class=autodoc-punctuation>)</span></div> <div class=autodoc-docstring><p>Factory to create an AdHocDataTable from a given config. The type of the AdHocDataTable created will be inferred from the config["url"] param.</p> <p><strong>Parameters:</strong></p> <ul> <li><strong>name</strong> - (<em>str</em>) The name of the table</li> <li><strong>config</strong> - (<em>dict</em>) The configuration of the table</li> <li><strong>schema</strong> - (<em>str, optional</em>) The schema in which the table resides</li> <li><strong>kwargs</strong> - Passed to init of the particular AdHocDataTable class</li> </ul> <p><strong>Returns:</strong></p> <p>(<em>AdHocDataTable</em>) - Return the created AdHocDataTable (subclass)</p></div> </div> <h2 id=get_adhoc_datasource_filename><a href=https://github.com/totalhack/zillion/blob/master/zillion/datasource.py#L186-L189>get_adhoc_datasource_filename</a><a class=headerlink href=#get_adhoc_datasource_filename title="Permanent link">&para;</a></h2> <div class=autodoc> <div class=autodoc-signature><code>zillion.datasource.<strong>get_adhoc_datasource_filename</strong></code><span class=autodoc-punctuation>(</span><em class=autodoc-param>ds_name</em><span class=autodoc-punctuation>)</span></div> <div class=autodoc-docstring><p>Get the filename where the adhoc datasource will be located</p></div> </div> <h2 id=get_adhoc_datasource_url><a href=https://github.com/totalhack/zillion/blob/master/zillion/datasource.py#L192-L194>get_adhoc_datasource_url</a><a class=headerlink href=#get_adhoc_datasource_url title="Permanent link">&para;</a></h2> <div class=autodoc> <div class=autodoc-signature><code>zillion.datasource.<strong>get_adhoc_datasource_url</strong></code><span class=autodoc-punctuation>(</span><em class=autodoc-param>ds_name</em><span class=autodoc-punctuation>)</span></div> <div class=autodoc-docstring><p>Get a connection URL for the datasource</p></div> </div> <h2 id=get_ds_config_context><a href=https://github.com/totalhack/zillion/blob/master/zillion/datasource.py#L51-L53>get_ds_config_context</a><a class=headerlink href=#get_ds_config_context title="Permanent link">&para;</a></h2> <div class=autodoc> <div class=autodoc-signature><code>zillion.datasource.<strong>get_ds_config_context</strong></code><span class=autodoc-punctuation>(</span><em class=autodoc-param>name</em><span class=autodoc-punctuation>)</span></div> <div class=autodoc-docstring><p>Helper to get datasource context from the zillion config</p></div> </div> <h2 id=join_from_path><a href=https://github.com/totalhack/zillion/blob/master/zillion/datasource.py#L396-L423>join_from_path</a><a class=headerlink href=#join_from_path title="Permanent link">&para;</a></h2> <div class=autodoc> <div class=autodoc-signature><code>zillion.datasource.<strong>join_from_path</strong></code><span class=autodoc-punctuation>(</span><em class=autodoc-param>ds</em><span class=autodoc-punctuation>, </span><em class=autodoc-param>path</em><span class=autodoc-punctuation>, </span><em class=autodoc-param>field_map=None</em><span class=autodoc-punctuation>)</span></div> <div class=autodoc-docstring><p>Given a path in the datasource graph, get the corresponding Join</p> <p><strong>Parameters:</strong></p> <ul> <li><strong>ds</strong> - (<em>DataSource</em>) The datasource for the join</li> <li><strong>path</strong> - (<em>list of str</em>) A list of tables that form a join path</li> <li><strong>field_map</strong> - (<em>dict, optional</em>) Passed through to Join init</li> </ul> <p><strong>Returns:</strong></p> <p>(<em>Join</em>) - A Join between all tables in the path</p></div> </div> <h2 id=metadata_from_connect><a href=https://github.com/totalhack/zillion/blob/master/zillion/datasource.py#L136-L156>metadata_from_connect</a><a class=headerlink href=#metadata_from_connect title="Permanent link">&para;</a></h2> <div class=autodoc> <div class=autodoc-signature><code>zillion.datasource.<strong>metadata_from_connect</strong></code><span class=autodoc-punctuation>(</span><em class=autodoc-param>connect</em><span class=autodoc-punctuation>, </span><em class=autodoc-param>ds_name</em><span class=autodoc-punctuation>)</span></div> <div class=autodoc-docstring><p>Create a bound SQLAlchemy MetaData object from a "connect" param. The connect value may be a connection string or a DataSourceConnectSchema dict. See the DataSourceConnectSchema docs for more details on that format.</p></div> </div> <h2 id=parse_replace_after><a href=https://github.com/totalhack/zillion/blob/master/zillion/datasource.py#L76-L101>parse_replace_after</a><a class=headerlink href=#parse_replace_after title="Permanent link">&para;</a></h2> <div class=autodoc> <div class=autodoc-signature><code>zillion.datasource.<strong>parse_replace_after</strong></code><span class=autodoc-punctuation>(</span><em class=autodoc-param>replace_after</em><span class=autodoc-punctuation>)</span></div> <div class=autodoc-docstring><p>Parse a case-insensitive interval string of the format "number interval". The number may be a float, and the inverval options are: seconds, minutes, hours, days, weeks.</p></div> </div> <h2 id=populate_url_context><a href=https://github.com/totalhack/zillion/blob/master/zillion/datasource.py#L56-L61>populate_url_context</a><a class=headerlink href=#populate_url_context title="Permanent link">&para;</a></h2> <div class=autodoc> <div class=autodoc-signature><code>zillion.datasource.<strong>populate_url_context</strong></code><span class=autodoc-punctuation>(</span><em class=autodoc-param>url</em><span class=autodoc-punctuation>, </span><em class=autodoc-param>ds_name</em><span class=autodoc-punctuation>)</span></div> <div class=autodoc-docstring><p>Helper to do variable replacement in URLs</p></div> </div> <h2 id=reflect_metadata><a href=https://github.com/totalhack/zillion/blob/master/zillion/datasource.py#L159-L183>reflect_metadata</a><a class=headerlink href=#reflect_metadata title="Permanent link">&para;</a></h2> <div class=autodoc> <div class=autodoc-signature><code>zillion.datasource.<strong>reflect_metadata</strong></code><span class=autodoc-punctuation>(</span><em class=autodoc-param>metadata</em><span class=autodoc-punctuation>, </span><em class=autodoc-param>reflect_only=None</em><span class=autodoc-punctuation>)</span></div> <div class=autodoc-docstring><p>Reflect the metadata object from the connection. If reflect_only is passed, reflect only the tables specified in that list</p></div> </div> <h2 id=url_connect><a href=https://github.com/totalhack/zillion/blob/master/zillion/datasource.py#L197-L244>url_connect</a><a class=headerlink href=#url_connect title="Permanent link">&para;</a></h2> <div class=autodoc> <div class=autodoc-signature><code>zillion.datasource.<strong>url_connect</strong></code><span class=autodoc-punctuation>(</span><em class=autodoc-param>ds_name</em><span class=autodoc-punctuation>, </span><em class=autodoc-param>connect_url=None</em><span class=autodoc-punctuation>, </span><em class=autodoc-param>data_url=None</em><span class=autodoc-punctuation>, </span><em class=autodoc-param>if_exists='fail'</em><span class=autodoc-punctuation>, </span><em class=autodoc-param>replace_after='1 days'</em><span class=autodoc-punctuation>)</span></div> <div class=autodoc-docstring><p>A URL-based datasource connector. This is meant to be used as the "func" value of a DataSourceConnectSchema. Only one of connect_url or data_url may be specified.</p> <p><strong>Parameters:</strong></p> <ul> <li><strong>ds_name</strong> - (<em>str</em>) The name of the datasource to get a connection for</li> <li><strong>connect_url</strong> - (<em>str, optional</em>) If a connect_url is passed, it will create a bound MetaData object from that connection string.</li> <li><strong>data_url</strong> - (<em>str, optional</em>) If a data_url is passed, it will first download that data (or make sure it is already downloaded) and then create a connection to that data file, which is assumed to be a SQLite database. The name of the database file will be based on the name of the datasource passed in.</li> <li><strong>if_exists</strong> - (<em>str, optional</em>) If a data_url is in use, this will control handling of existing data under the same filename. If "fail", an exception will be raised if the file already exists. If "ignore", it will skip downloading the file if it exists. If "replace", it will create or replace the file. If "replace_after" it will check the age of the file and replace it after the age interval provided in the <code>replace_after</code> param.</li> <li><strong>replace_after</strong> - (<em>str, optional</em>) If <code>if_exists</code> is "replace_after, use this value to determine the age threshold. The format is "number interval", where the number may be an int or float and the interval options are: seconds, minutes, hours, days, weeks. Note that this only occurs when <code>url_connect</code> is called, which is typically on datasource init; it does not replace itself periodically while the datasource is instantiated.</li> </ul></div> </div> </article> </div> </div> </main> <footer class=md-footer> <div class=md-footer-nav> <nav class="md-footer-nav__inner md-grid" aria-label=Footer> <a href=../zillion.core/ title=zillion.core class="md-footer-nav__link md-footer-nav__link--prev" rel=prev> <div class="md-footer-nav__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </div> <div class=md-footer-nav__title> <div class=md-ellipsis> <span class=md-footer-nav__direction> Previous </span> zillion.core </div> </div> </a> <a href=../zillion.field/ title=zillion.field class="md-footer-nav__link md-footer-nav__link--next" rel=next> <div class=md-footer-nav__title> <div class=md-ellipsis> <span class=md-footer-nav__direction> Next </span> zillion.field </div> </div> <div class="md-footer-nav__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg> </div> </a> </nav> </div> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-footer-copyright> <div class=md-footer-copyright__highlight> Copyright &copy; 2020 - present @totalhack </div> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs </a> </div> <div class=md-footer-social> <a href=https://github.com/totalhack/zillion target=_blank rel=noopener title=github.com class=md-footer-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 480 512"><path d="M186.1 328.7c0 20.9-10.9 55.1-36.7 55.1s-36.7-34.2-36.7-55.1 10.9-55.1 36.7-55.1 36.7 34.2 36.7 55.1zM480 278.2c0 31.9-3.2 65.7-17.5 95-37.9 76.6-142.1 74.8-216.7 74.8-75.8 0-186.2 2.7-225.6-74.8-14.6-29-20.2-63.1-20.2-95 0-41.9 13.9-81.5 41.5-113.6-5.2-15.8-7.7-32.4-7.7-48.8 0-21.5 4.9-32.3 14.6-51.8 45.3 0 74.3 9 108.8 36 29-6.9 58.8-10 88.7-10 27 0 54.2 2.9 80.4 9.2 34-26.7 63-35.2 107.8-35.2 9.8 19.5 14.6 30.3 14.6 51.8 0 16.4-2.6 32.7-7.7 48.2 27.5 32.4 39 72.3 39 114.2zm-64.3 50.5c0-43.9-26.7-82.6-73.5-82.6-18.9 0-37 3.4-56 6-14.9 2.3-29.8 3.2-45.1 3.2-15.2 0-30.1-.9-45.1-3.2-18.7-2.6-37-6-56-6-46.8 0-73.5 38.7-73.5 82.6 0 87.8 80.4 101.3 150.4 101.3h48.2c70.3 0 150.6-13.4 150.6-101.3zm-82.6-55.1c-25.8 0-36.7 34.2-36.7 55.1s10.9 55.1 36.7 55.1 36.7-34.2 36.7-55.1-10.9-55.1-36.7-55.1z"/></svg> </a> </div> </div> </div> </footer> </div> <script src=../assets/javascripts/vendor.d710d30a.min.js></script> <script src=../assets/javascripts/bundle.5f27aba8.min.js></script><script id=__lang type=application/json>{"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents"}</script> <script>
        app = initialize({
          base: "..",
          features: [],
          search: Object.assign({
            worker: "../assets/javascripts/worker/search.27c6a5e6.min.js"
          }, typeof search !== "undefined" && search)
        })
      </script> </body> </html>